# スクリプティング
この節では、もっぱらJavaScriptを扱う`script`要素について説明をします。
## `script`要素
`script`要素は、主に動的なスクリプト（通常はJavaScript）を埋め込んだり参照したりする要素です。
<!-- spec: 4.12.1 -->
### `type` 属性による判別
`script`要素は、指定されるtype属性によって、その処理方法が変わります。仕様では、クラシックスクリプト、モジュールスクリプト、データブロックの3つに分類されます。

#### クラシックスクリプト
通常のJavaScriptです。
type属性を省略するか、空にする、もしくはMIME Sniffing標準に定められたJavaScript MIME typeエッセンシャルマッチとなるもの（例えば、`text/jacascript`）を指定すると、`script`要素はクラシックスクリプトとして処理されます。
なお、古いHTMLでは`type`属性は必須でしたが、現在では省略可能です。クラシックスクリプトを意図する場合は冗長なだけでなので、省略してしまいましょう。
また、さらに古いHTMLでは`language`属性が`type`属性の代わりに指定されることがありましたが、`language`属性は現在廃止されています。古いHTMLをメンテナンスする際に見かけたときは、削除してしまいましょう。

#### モジュールスクリプト
ECMAScript 2015で新たに導入された、ES Modulesとして動作するJavaScriptです。モジュールスクリプトとして動作させるためには、`type="module"`を指定します。ES Modulesを解釈できないブラウザーのために、フォールバックとなる手段を提供する必要がありますが、この目的のために`nomodule`属性が存在します。`nomodule`属性を指定すると、モジュールスクリプトをサポートするブラウザーでは、そのスクリプトを無視します。
<!--
どこかでECMAScriptの簡単な説明（次のようなもの）をしておきたいが、どこですべきか？
JavaScriptは、Ecma Internationalという標準化団体により標準化がされているECMAScriptの実装です。ECMAScriptには版（edition）があり、現在は発行年で区別されています。発行年で区別するようになったECMAScript 2015から、毎年6月に新しい版に更新されています。
-->

```
<script type=module src=app.js></script>
<script nomodule src=classic-app.js</script>
```

このように記述すれば、モジュールスクリプトを解釈できるブラウザーは、モジュールスクリプトとしてapp.jsのみを実行し、モジュールスクリプトを解釈できないブラウザーは、クラシックスクリプトとしてclassic-app.jsのみを実行します。

#### データブロック
`type`属性にJavaScript MIME typeエッセンシャルマッチとならない、妥当なMIME typeが設定されると、データブロックを意味します。ブラウザーは要素の中身を処理しません。

<!--
スペックから例を持ってくるべきか、
https://ginpen.com/2011/12/22/built-any-data/
こんな感じのそれっぽいスクリプトもどきも書くべきか。
-->
<!--コードはspecからのコピー-->
次のコードはデータブロックの一例です。
```
<script src="game-engine.js"></script>
<script type="text/x-game-map">
........U.........e
o............A....e
.....A.....AAA....e
.A..AAA...AAAAA...e
</script>
```


### `async` 属性および `defer` 属性
`async`属性および`defer`属性は
<!-- 超速本P.102あたりも参照 -->

https://html.spec.whatwg.org/images/asyncdefer.svg
を日本語化してはりつける

`DOMContentLoaded`の説明は必要。

## `noscript`要素
`noscript`要素は、スクリプトが無効である場合に、その子要素を表示します。言い換えると、なんらかの場合にブラウザーでJavaScriptが無効になっている場合に、この要素を用いることでフォールバックコンテンツを提供できるということです。
例えば、スクロールしてから画像が表示されるような場所に配置される`img`要素に対して、JavaScriptを用いて遅延読み込み（Lazy load）を行う場合、次のような`noscript`要素のコードを記述することで、JavaScriptが無効な環境でも画像を表示させることができます。

```
<img src="blank.jpg" data-src="target.jpg" alt="">
<noscript><img src="target.jpg" alt=""></noscript>
```

## `template`要素
<!-- なにか用例があると面白いか -->
<!-- `canvas`も -->
