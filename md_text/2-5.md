# HTMLの細かい文法

マークアップの基本となるタグの書き方については先に説明しました。通常のマークアップ業務では先の知識で十分なのですが、主にセキュリティの観点から、通常はしないようなマークアップがどのように解釈されるのか、という観点の議論が必要となることもあります。
ここでは、タグの書き方についてもう一歩踏み込んだところをご説明します。

## 細かい文法ルールを知りたいときは

HTMLのパーサーのルールは仕様で明確に定められています。「このような書き方は可能?」「このように書いたらどのように解釈される?」という疑問は、ほとんどの場合、仕様を読み込めば解決できます。

https://html.spec.whatwg.org/multipage/parsing.html

ここでは、そのごく一部を豆知識として紹介します。

## タグ名の先頭に使用できる文字

HTMLのタグ名は英大文字小文字で始まる必要があります。数字で始まることは許されません。以下は正しくない例です。

```html
<42>
```

このようなマークアップはエラー (invalid-first-character-of-tag-name parse error) となり、タグではなくテキストとして解釈されます。つまり、以下のようなマークアップと同じ結果になります。

```html
&lt;42>
```

なお、2文字目以降には数字を使用することも可能で、実際に`<h1>`のようなタグ名が使用されています。また、実は、2文字目以降には記号類も使用できます。利用できない文字は少なく、`>`(タグの終了と解釈される)、空白類文字 (属性値との区切りと解釈される)、`/`(自己終了タグもしくは属性値との区切りと解釈される)などです。

`/`の扱いについては、セキュリティの観点から注意が必要です。以下のようなマークアップは不正です。

```html
<span/onmouseover="alert(1)">test</span>
```

これはエラー (unexpected-solidus-in-tag parse error) となりますが、エラー処理によって`/`のあとは属性名とみなされ、以下のようなマークアップと等価となります。

```html
<span onmouseover="alert(1)">test</span>
```







## 終了タグに属性は書けない

終了タグに属性を書くことはできません。

```html invalid
<p>foo</p class="foo">
```


## 開始タグを省略すると属性は書けない

開始タグを省略できる場合がありますが、開始タグを省略した際に属性だけを書く方法は存在しません。つまり、属性を指定したければ必ず開始タグを書かなければなりません。
たとえば、`body`要素の開始タグは省略可能ですが、`class`属性を指定したい場合は開始タグを書く必要があります。

```html
<body class="type1">
```




## 複数の属性

同一の属性名を持つ属性を複数指定することはできません。


属性の重複はできません


## 属性値の省略

ブール型属性の項で触れましたが、属性値の記述は省略することもできます。属性値を省略した場合、空文字列が指定されているものとして扱われます。以下の3つのimg要素の書き方は同じ意味になります。

```html
<img alt>
<img alt="">
<img alt=''>
```

`<img alt="">` と書いた際、ブラウザの開発者ツールで調査してDOMツリーを見るとすると `<img alt>` と表示される場合があります。これは、最も短い書き方で正規化されているためです。







## 引用符のない属性

属性を書く際には属性値を引用符でくくるのが基本です。






