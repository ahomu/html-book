<!-- ch3-5.txt (4ページ、3000～4600字想定) -->
# リンク
この節では、a、area、link要素で表すことのできる2つのリソースの関係について説明します。
<!--事実上リンクタイプの説明？a要素、link要素の節とどう差別化するか（あるいは統合すべきか）-->
## リンクタイプ
リンクタイプは`rel`属性の値で与えることができます。これにより、現在の文書とリンク先のリソースとの関係を表せます。なお、古いHTMLでは`rev`属性で`rel`とは逆向きのリンクを与えることができましたが、HTML標準では廃止されています。

`rel`属性は、`link`、`a`、`area`要素に指定できます。属性値は、特定の組み合わせを除いて、1つのみを指定しなければなりません。また属性値は、大文字・小文字を区別しません。


<!-- なんだかんだで全部説明が要りそう？ -->
### リンクタイプ`"alternate"`
このリンクタイプは、現在の文書の代替表現を与えます。このキーワードの意味は、他の属性値に依存して変化します。

#### 代替スタイルシート
`link`要素の`stylesheet`キーワードとともに、`alternate`が指定される場合、そのスタイルシートは代替スタイルシートになります。

<!--必要であれば、ブラウザーのスクリーンショット。http://www.htmq.com/csskihon/013.shtml のような。 -->

```
<!-- 固定スタイルシート -->
<link rel="stylesheet" href="default.css">

<!-- 優先スタイルシート -->
<link rel="stylesheet" href="basic.css" title="基本スタイル">

<!-- 代替スタイルシート -->
<link rel="alternate stylesheet" href="alt1.css" title="代替スタイル1">
<link rel="alternate stylesheet" href="alt1.css" title="代替スタイル2">
```
`title`属性や、`alternate`キーワードの有無で、スタイルシートの位置づけが変化します。

<!--
MDN曰く、CSSOMが仕様の模様
https://developer.mozilla.org/ja/docs/Web/CSS/Alternative_style_sheets
6.2. CSS Style Sheet Collections
https://drafts.csswg.org/cssom/#css-style-sheet-collections
-->
#### 配信フィードの指定
`type`属性が`application/rss+xml`か`application/atom+xml`のいずれかと一緒に`alternate`キーワードが指定される場合、配信フィード（RSSやAtom）を意味します。`link`要素で指定することで、フィードの自動検出を促します。

```
<!-- LSからのコピー -->
<link rel="alternate" type="application/atom+xml" href="posts.xml" title="Cool Stuff Blog">
```
#### 文書の代替表現
代替スタイルシートにも配信フィードにも当てはまらない場合、文書の代替表現を表します。その性質は、`herflang`属性と`type`属性で決定されます。
`alternate`キーワードが`hreflang`属性とともに指定され、現在のページと異なる言語をが指定される場合、その文書が文書が翻訳であることを示します。
`alternate`キーワードが`type`属性とともに指定される場合、文書は現在の文書をフォーマットに変換したものであることを示します。
`hreflang`と`type`属性は組み合わせて使用できます。

<!--LSからのコピー-->
```
<link rel=alternate href="/en/html" hreflang=en type=text/html title="English HTML">
<link rel=alternate href="/fr/html" hreflang=fr type=text/html title="French HTML">
<link rel=alternate href="/en/html/print" hreflang=en type=text/html media=print title="English HTML (for printing)">
<link rel=alternate href="/fr/html/print" hreflang=fr type=text/html media=print title="French HTML (for printing)">
<link rel=alternate href="/en/pdf" hreflang=en type=application/pdf title="English PDF">
<link rel=alternate href="/fr/pdf" hreflang=fr type=application/pdf title="French PDF">
```

<!-- https://developers.google.com/search/mobile-sites/mobile-seo/separate-urls?hl=ja -->
仕様には説明はありませんが、Googleでは、モバイル向けページ（https://m.example.com/1）とパソコン向けページ（http://m.example.com/1）で別々のURLがある場合、それぞれのページに次のようなアノテーションを指定することで、2つのURLの関係を認識することが謳われています。

パソコン向けでは、
```
<link rel="alternate" media="only screen and (max-width: 640px)"
 href="http://m.example.com/1">
```
モバイル向けでは、
```
<link rel="canonical" href="http://www.example.com/1">
```

### リンクタイプ`"author"`
現在の文書の著者へのリンクを与えます。古いHTMLで、`rev=made`で指定されたものと同じ意味です。値は電子メールで与えることがあります。<!--本当にメールアドレスでよいのか。巷にはGoogle+の用法もあるが、穏当な値は？ -->
```
<link rel="author" href="mailto:me@example.com">
```

### リンクタイプ`"bookmark"`
リンクが最も近い祖先のセクションのパーマリンクであることを明示します。
<!-- この例は本当に正しい？ -->
```
<article>
<a href=”a.html” rel=bookmark>ブログのパーマリンク</a>
<h1>ブログのタイトル</h1>
<p>ブログの中身
<article>
<p>コメント1</p>
<p><a href=”a.html” rel=bookmark>コメント1のパーマリンク</a></p>
</article>
</article>
```


### リンクタイプ`"external"`
<!--これいる？nofollowと組み合わせるのがはやってたようだけど、言及必要か？-->
参照される文書が現在の文書と同じサイトの一部でないことを示します。つまり、外部サイトであることを明示します。
```
<a href=”https//example.com/” rel=”external”>外部サイト</a>
```


### リンクタイプ`"help"`
<!--題目のように古くから存在するが果たして重要度は高いのか？-->
コンテキストに応じたヘルプへのリンクを提供します。
```
<!-- LSからのコピー -->
<p><label> Topic: <input name=topic> <a href="help/topic.html" rel="help">(Help)</a></label></p>
```


### リンクタイプ`"icon"`
現在の文書を表現するアイコンを表します。もっぱら、いわゆるファビコン（favicon）をブラウザーのインターフェイスに表示させるために使用されます。

```
<link rel=icon href=favicon.ico sizes="16x16 32x32" type="image/vnd.microsoft.icon">
```

`sizes`属性はアイコンのサイズを表します。ブラウザーによって、使用されるアイコンの大きさが異なることが知られています。やや古いですが、[ファビコン・カンニング・ペーパー](https://hail2u.net/documents/favicon-cheat-sheet-ja.html)が参考になります。

歴史的な理由で、`shortcut icon`とされることがありますが、もはや`shortcut`は不要です。

なお、アイコンとしてfavicon.icoのみしか使用しない場合、/favicon.icoにアイコンを設置さえすれば、`link`要素でアイコンを設定する必要はありません。ブラウザーは通常、/favicon.icoにアイコンがないか、自動的に取得を試みるためです。


### リンクタイプ`"license"`
著作権情報を説明する文書へのリンクを表します。例えば、文書全体が『クリエイティブ・コモンズ 表示 4.0 ライセンス』で提供される場合、次のように表すことができます。
```
<link rel=license href=https://creativecommons.org/licenses/by/4.0/deed.ja>
```
`a`要素で表すこともできますが、その場合、文書全体なのか一部のみなのかを区別する方法は、仕様では明示されていません。ユーザーに分かりやすく区別する必要があります。

<!-- SEO系？ -->
### リンクタイプ`"canonical"`
//現在の文書の優先URLを指定する
https://support.google.com/webmasters/answer/139066?hl=ja

### リンクタイプ`"nofollow"`
//現在の文書の原作者や発行者が参照される文書を推奨しないことを示す。

<!-- セキュリティ系？ -->
### リンクタイプ`"noopener"`
//  ハイパーリンクを辿ることで作成されたブラウジングコンテキストがdisownedであることを示す。
https://developers.google.com/web/tools/lighthouse/audits/noopener?hl=ja

### リンクタイプ`"noreferrer"`
https://qiita.com/wakaba@github/items/707d72f97f2862cd8000
// ハイパーリンクを辿ることによって作成されるブラウジングコンテキストが破棄され、`Referer`ヘッダーが取得されないことを示す。

<!-- いらないのでは？
### リンクタイプ"pingback"
// 現在の文書にpingbackを扱うpingbackサーバーのアドレスを与える。
-->

<!-- Resource Hints https://w3c.github.io/resource-hints/ 系 -->
<!-- https://blog.jxck.io/entries/2016-02-11/resource-hints.html -->

### リンクタイプ`"dns-prefetch"`
これは、ブラウザーに指定されたオリジンのドメイン名の名前解決を事前に行うよう指示することで、そのオリジンのリソースを読み込むときの時間の短縮を図るものです。
```
<link rel="dns-prefetch" href="http://example.com">
```

### リンクタイプ`"preconnect"`
これは、ブラウザーにDNSの名前解決に加えて、TCPコネクションの確立までするよう指示することで、即座にサーバーへのリクエストを可能な状態にします。これによりリソースの読み込み時間の短縮を図ります。
```
<link rel="preconnect" href="http://example.com">
```

### リンクタイプ`"prefetch"`
これは、ブラウザーに指定したリソースを事前にダウンロードさせてキャッシュするよう指示するものです。リソースが必要となることが確実な場合に有効です。
```
<link rel="prefetch" href="next.js">
```

### リンクタイプ`"prerender"`
これは、ブラウザーに指定したリソースを取得してバックグラウンドでレンダリングするよう指示するものです。これにより、すみやかにページ遷移を行うことができます。
```
<link rel="prerender" href="http://example.com/next-page.html">
```

### リンクタイプ`"preload"`
<!-- https://blog.jxck.io/entries/2016-03-04/preload.html が参考になる -->
現在のページで必要なリソースを事前にダウンロードさせることで、ページのパフォーマンスを向上させるものです。例えば画像であるならば、次のような例が考えられます。
```
<link rel="preload" href="bgimage.png" as="image">
<style>
div.hoge {background-image: url: ("bgimage.png");
</style>
```
`as`属性は、リソースの種別を指定します。`rel="preload"`では必ず同時に指定しなければなりません。この属性は、ブラウザーがリソースの優先順位やContent Security Policyを適切に処理することを手助けします。<!-- ここまで詳細に記述する必要？ -->リソースの種別は、Fetch標準の[<code>destination</code>](https://fetch.spec.whatwg.org/#concept-request-destination)に定められた値を指定します。

### リンクタイプ`"modulepreload"`
<!-- https://1000ch.net/posts/2017/module-preload.html を参考に-->
これは、モジュールスクリプト専用の`preload`の代替です。
```
<link rel="modulepreload" href="critical.mjs">
```

### リンクタイプ`"search"`
// 現在の文書と関連する文書を通して検索に使用できるリソースへのリンクを与える。

### リンクタイプ`"stylesheet"`
// Imports a style sheet.

### リンクタイプ`"tag"`
// 現在の文書に適用される（与えられたアドレスにより識別される）タグを与える。

### シーケンシャルリンクタイプ
ページが一続きのコンテンツであることを示します。リンクタイプ`"next"`は次のページ、リンクタイプ`"prev"`は前のページであることをそれぞれ示します。例えば、3つに複数に分割された記事で、2つめのページがarticle-part2.htmlとすると、その前後のページは次のように表されます。
```
<link rel="prev" href="article-part1.html">
<link rel="next" href="article-part3.html">
```

### その他のリンクタイプ
HTML標準には規定されないリンクタイプであっても、microformats wikiに登録することで、HTMLで使用できます。詳しくは、wikiを参照ください。

http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions

