<!-- ch1-4_test.md.txt (4ページ、3000～4600字想定) -->
# HTMLの歴史

HTMLを書く際には、仕様に沿って適切なマークアップをする必要があります。では、その仕様はどのように策定されてきたのでしょうか。ここでは、現在のHTMLの仕様に至るまでの歴史と、HTML仕様を策定した組織の変遷について説明します。

## ウェブの誕生とHTML 1.0

ウェブが初めてインターネット上で公開されたのは1991年のことでした。このとき、ティム・バーナーズ＝リー卿（Sir Tim Berners-Lee）によって、ウェブを構成するURL、HTTP、HTMLの仕組みがつくられます。

ウェブ最初期のHTMLのルールは、「SGML」(Standard Generalized Markup Language)という汎用のマークアップ言語を参考に策定されていました。SGMLの仕様は1986年にISO 8879:1986としてISO規格になっていたもので、タグを使ってマークアップするという考え方は、このSGMLに由来します。

ところで、SGMLの規格に従って定義された文書を“SGMLアプリケーション”もしくは”SGML応用系”と呼びますが、当時のHTMLは、厳密なSGMLアプリケーションではありませんでした。SGMLでは「文書型定義」(Document Type Definition, DTD)と呼ばれる、文書構造を規定するルールが必要になりますが、この当時のHTMLにはDTDが存在せず、SGML文書として処理できる要件を満たしていませんでした。

その後、メーリングリストなどでの議論を経て、HTML 1.0とされるドラフト文書[^1]が1993年に記録されています。

この時点で、SGMLの規格を満たすようにDTDが整備されました。また、リンク、見出し、リスト、画像の埋め込みといった、現在のHTMLでも用いられる基本的なHTMLの要素も揃っていました (HTMLの”要素”とは何かについては、2章で説明します)。

ちなみに、段落を表す`p`要素もありましたが、現在のように、段落としたい範囲を`p`要素としてマークアップするものではありませんでした。当時は段落の切れ目に空要素の`<p>`タグを置くような、現在の`br`要素に近い使い方で提供されていました。これは、のちの仕様で改められることになります。

そして、当時は、ユーザーの入力を受け付ける`form`要素などは存在せず、類似の機能として`isindex`要素が存在するだけでした。`isindex`要素は送信先を指定できないフォームと言えるもので、現在では廃止された要素です。しかし、多くのブラウザーは互換性のために`isindex`要素を解釈して入力欄を表示します。

## IETF RFCとHTML 2.0

技術仕様として所定の手続きを経た、正式なHTMLの仕様と呼べるものができたのは1995年のことです。IETFのもとで技術仕様としての手続きが行われたこのHTML仕様はHTML 2.0と名付けられ、RFC 1886[^2]として発行されました。

HTML 2.0では、先に述べた`p`要素の使い方が改められたほか、`form`要素なども加わり、現在使われる基本的な要素の多くが揃いました。ただし、表を表す`table`などはありませんでした[^3]。

また、この時点では文字集合としてISO-8859-1が指定されており、仕様の上では厳密には日本語の文字が使えないものでした。文字集合については、2章で詳しく説明します。仕様の上で日本語が使えるHTMLは、国際化が検討された1997年のRFC 2070[^4]を待たなければなりませんでした。

### IETF

IETF (Internet Engineering Task Force)は、インターネット技術の標準化を行うための組織です。IETFは、「RFC」という文書群を発行しています。前述のRFC 1886のように、基本的には RFC + 数字の形式で呼ばれます。この数字は一度RFCとして発行されるとその番号は変わることのない、永続的なものです。

RFCは、Request For Commentの略で、「コメント求む」という意味です。インターネットのコミュニティで共有すべき事柄を書き、それに対して広く意見を求める、というニュアンスです。IETFで議論を経た技術的な約束事が書かれることが多いのですが、参考情報や、はたまたエイプリルフールのジョークまで、さまざまな内容が書かれることがあります。

RFCは通常、Internet-Draftと呼ばれるドラフト文書を経てRFCとなります。RFCはいくつかの種類に分類されます。

表 1.4-1 RFC文書の分類の一部

| 略称 | 分類名                | 分類の説明                                                                                                                                          |
|------|-----------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| I-D  | Internet-Draft        | RFCの草案文書。RFCの番号は付与されない。RFCになることを意図しないものもある。                                                                       |
| PS   | Proposed Standard     | 標準化過程（Standards Track）で、標準になる前の段階。コミュニティーによる議論とレビューを経た、インターネットで使用するのに安定した問題のないもの。 |
| STD  | Internet Standard     | インターネット標準。PSが成熟したものであり、相互運用可能な実装が複数存在することで有益だと認められた、標準化過程の最終段階。                        |
| Info | Informational         | インターネット全体に広く知らせるためのもの。エイプリルフールのジョークRFCとして知られるものもここに含まれる。                                                            |
| Hist | Historical            | 標準であったが別の仕様によって使われなくなったなどのため、標準としての役割を終えた、歴史的な資料。使用は推奨されない。                              |
| BCP  | Best Current Practice | インターネット技術に関する規則や推奨事項などに用いられる分類。

このうち、STDとBCPは、STDシリーズ、BCPシリーズとして、「RFC+番号」とは別に、中身に対して永続的な番号が与えられます。例えば、HTML仕様から参照されるBCP 47は、2019年現在ではRFC 5646とRFC 4647を指しますが、はじめはRFC 1766に与えられていたものでした。

なお、前述のRFC 1886やRFC 2070を含む、IETFでHTMLに関してRFCとなった文書は、現在では役割を終えており、Histと分類されています。

## W3Cの誕生とHTML 3.2

その後、HTML 3.0の標準化作業が行われます。既存のHTMLとの互換性を捨てて、全ての要素を定義し直す試みでしたが、作業はまとまらずに中断され、幻の仕様となりました。

その後、過去のHTMLとの互換性を重視したHTML 3.2が正式な後続仕様となり、1997年1月にW3C勧告として発行されました[^5]。HTML 2.0の要素に加え、`table`要素が取り込まれたほか、`font`要素、`align`属性など、文書の見た目を制御する機能が多数追加されました。これらの多くは、当時、すでにブラウザーベンダーによって独自に実装されていたものを仕様側に取り込んだものです。

この仕様はRFC 2070とほぼ同時期に完成したため、RFC2070の国際化の機能はHTML 3.2には取り込まれませんでした。よって、HTML 3.2は、正式には日本語の文字が扱えない仕様となっています。

また、ほぼ同時期の1996年12月に、スタイルシートの仕様であるCSS1(Cascading Style Sheets, level 1)がW3C勧告となっています。しかしHTML 3.2では、`style`要素は予約語とされているだけで定義はされておらず、正式にはスタイルシートを扱うことのできない仕様になっていました。

### W3Cと勧告

ウェブに関する標準を推進する団体として、ティム・バーナーズ＝リーがディレクターを務める「W3C」(World Wide Web Consortium)が発足したのは、1994年のことです。

W3Cは、ウェブ技術に関する仕様を策定する標準化団体です。仕様はワーキンググループ（Working Group、作業部会とも）で議論され作成されます。W3CにはHTMLワーキンググループのほか、スタイルシートの仕様を策定するCSSワーキンググループ、アクセシビリティガイドラインを策定する AGWG (Accessibility Guidelines Working Group) なども存在します。

W3Cが発行する、標準に相当する安定した仕様を「勧告」(recommendation)と呼びます。ある文書が勧告になるには、W3Cプロセス文書と呼ばれる文書に則って、仕様を安定させていく必要があります。これを勧告トラックとも呼びますが、仕様の安定度合いに応じて、大きく3つの段階に分類できます。

表 1.4-2 勧告トラックにあるW3C技術文書の主要なステータス

| 略称 | ステータス               | ステータスの説明                                                                                                                                                      |
|------|--------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| WD   | Working Draft            | 作業草案と訳されるもの。W3C仕様の設計段階。ワーキンググループでの議論の結果によっては、大きく内容が変更されることがある。                                             |
| CR   | Candidate Recommendation | 勧告候補。数回のWDの改訂を経た、WDと比較して安定した段階。古いW3Cプロセス文書にあったLC（Last Call Working Draft; 最終作業草案）は現在、このCRに吸収されている。この段階になると、実装の呼びかけと仕様のテストが行われる。CRを終了するには、2つの独立した実装が必要となる。 |
| REC  | Recommendation           | 勧告。W3C仕様の最終段階でディレクターに承認された、完成した仕様。RECになる前にはPR（Proposed Recommendation; 勧告案）という段階がある。                               |

ほかに、よく目にする2つのステータスがあります。

表 1.4-3 W3C技術文書のその他のステータス

| 略称 | ステータス         | ステータスの説明                                                                                                                                                                      |
|------|--------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| NOTE | Working Group Note | W3Cノートとも呼ばれる。勧告化を断念したものや、有益な参考情報、勧告を説明する付属文書など。                                                                                           |
| ED   | Editor's Draft     | 編集者草案とも訳される。W3Cの公開プロセスを経ていない、仕様の編集者によって適宜更新される文書。最新の作業中の草案であるが、ワーキンググループの合意を得た文書でないことに注意が必要。 |

Editor's Draftは、かつては限られた人でしか見ることができませんでしたが、後述のWHATWG Living Standardの影響を受け、今日では多くのW3Cワーキンググループで公開されています。

## HTML4

その後、1997年12月にW3Cの勧告となったのがHTML 4.0です[^6]。

HTML4ではHTML 3.2で予約されているだけだった`style`要素、`script`要素も定義され、正式にスタイルシートやスクリプトが使えるようになりました。これにより、文書の構造と見た目とを別々に定義できるようになりました。

このことに伴って、`font`などの見た目を制御する多くの要素要素などは不要になりました。HTML 4.0では、要素の定義自体を大きく "HTML 4.0 Strict " と "HTML4.0 Transitional" のふたつに分け、前者では見た目に関する要素や属性が使えない仕様、後者では使える仕様とし、互換性を重視する場合には見た目の要素も使用できる形をとりました。

そして大きく取り上げられたのが「アクセシビリティ」(accessibility) に関する要素です。フォーム部品にラベルをつけるための`label`要素が定義され、`img`要素の`alt`属性が必須となりました。また、仕様の文書からはWCAG(Web Content Accessibility Guidelines)が参照され、アクセシビリティ上の注意点に言及されるようになりました。

その後、1999年に、マイナーな改訂版であるHTML 4.01が勧告となりました。これをもって、HTMLは成熟した、SGMLアプリケーションととなりました。

## XHTML 1.0 と XHTML 1.1

HTML4の勧告の後、1998年には「XML」(extensible markup language) の仕様が勧告となります[^7]。XMLは、SGMLからいくつかの機能を取り去り、同時にマークアップのルールを厳密にすることで、パースしやすいようにした汎用マークアップ言語です。

XML 1.0の仕様が勧告になると、XMLブームとも言える状況が沸き起こり、さまざまなプログラムがXMLを扱うようになりました。そんな中、HTMLもXMLで再構築しようという流れが出てきます。

こうして、XMLの仕様に則ったHTMLの仕様として、XHTML 1.0が2000年に勧告となりました[^8]。新たな要素は追加されておらず、HTML 4をそのままXHTMLにしたものです。

その後、XMLのもつ拡張性という側面を生かし、XHTMLをモジュール化しようという試みがありました。こうして、2001年にXHTML 1.1が勧告となります[^9]。この際には`ruby`モジュールが追加され、文字にルビをふることができるようになりましたが、基本的な部分の要素は、HTML 4と変わらないものでした。

## コラム: 幻の XHTML 2.0

XHTMLを使うことで、HTML 4の要素をXMLの文法で書くことができるようになりました。しかし、既存の要素はほとんどそのままでした。

次世代の仕様として、これを大きく見直そうとしていたのがXHTML 2.0です。要素の分類や定義を根本から見直し、新しく定義しようと試みましたが、現在のウェブとの互換性がない仕様であったため、主にウェブブラウザーの開発者からは反発を生むことになりました。

仕様はまとまらず、2009年には仕様策定の打ち切りが決まりました。こうして、XHTML 2.0は幻の仕様となりました。

[^1]: https://www.w3.org/MarkUp/draft-ietf-iiir-html-01.txt

[^2]: https://tools.ietf.org/html/rfc1866

[^3]: `table`要素は、のちにRFC1942として提案されます。<https://tools.ietf.org/html/rfc1942>

[^4]: https://tools.ietf.org/html/rfc2070

[^5]: https://www.w3.org/TR/2018/SPSD-html32-20180315/

[^6]: https://www.w3.org/TR/REC-html40-971218/

[^7]: https://www.w3.org/TR/xml/

[^8]: https://www.w3.org/TR/xhtml1/

[^9]: https://www.w3.org/TR/xhtml11/
