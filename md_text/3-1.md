<!-- ch3-1_midashi.txt (4ページ想定) -->
# ルート要素と文書のメタデータ

この節では、HTML文書で最も上位となるルート要素と、HTML文書自身の情報を表すメタデータについて見ていくことにします。

## `html`要素

`html`要素はHTML文書で最も上位に出現する要素です。他のすべての要素は、この要素の子孫となります。

<!-- 単なる例示 -->
```html
<!doctype html>
<!-- HTMLのコード例。`...`は内容が省略されていることを表します -->
<html>
  <head>...</head>
  <body>...</body>
</html>
```

DOCTYPEやコメントは要素ではありませんから、`<html>`タグよりも前に出現することができます。`html`要素は、必ず1つの`head`要素を持ち、その後に1つの`body`要素を持ちます。

### ページの言語指定（`lang`属性）

`lang`属性はグローバル属性です。よって、どの要素でも設定することができるのですが、`lang`属性に設定できる「言語タグ」(language tag)は子孫要素に継承されるという特性があります。最上位のルート要素である`html`要素に`lang`属性を設定すれば、ページ全体の言語を指定できます。

WCAG 2.1の達成基準3.1.1 "Language of Page"[^1]では、`html`要素に`lang`属性をつけてページの言語を指定することを求めています。

[^1]:https://www.w3.org/TR/WCAG21/#language-of-page

<!-- 良い例 -->
```html
<html lang="ja"><!-- ページ全体の言語が日本語であることを表す -->
```

このように明示することで、ユーザーエージェントに対して、日本語で書かれた文章をもつHTML文書を日本語として認識させることができます。ページの言語を明示することで、ユーザーエージェントが適切なフォントを選択したり、スクリーンリーダーが適切な音声合成エンジンを選択することが可能になります。

逆に、誤った言語が指定されていると問題が起きることがあります。たとえば、iOSのVoiceOverは、`lang="en"`が指定されていると、日本語をうまく読み上げないことがあります。

言語タグの詳細については、4-1節の`lang`属性を参照してください。

### 名前空間宣言（`xmlns`属性）

XHTMLを意図して記述されたページでは、名前空間宣言と呼ばれる属性が指定されます。これはXMLの作法で、要素がどのタグ集合の要素なのかを区別するためのものです。特に、古いXHTMLのDOCTYPE宣言とともに次の例のような値を目にするかもしれません。

<!-- 単なる例示 -->
```xml
<!-- text/htmlでは冗長な例 -->
<html xmlns="http://www.w3.org/1999/xhtml">
```

これは、XHTMLを意図しない (MIMEタイプ`application/xhtml+xml`で配信しない) 通常のウェブページでは不要なもので、記述する必要はありません。

## `head`要素

`head`要素は文書に関するメタデータの集合を表すものです。`head`要素固有の属性は、現在のHTML仕様にはありません。子要素にさまざまなメタデータを含むことができます。

## `title`要素

`title`要素はページのタイトルを表すものです。原則として、この要素は必ず1つ存在しなければなりません。例外は、上位プロトコルでタイトルを示すことができるような場合で、例えば電子メールでHTMLを使用する場合には、電子メールのタイトルが別に存在するため、`title`要素が省略されることもあり得ます。

ここで指定されたページのタイトルは、ブラウザーのタブに表示されたり、検索エンジンによる検索結果のリンクテキストに使われたりします。

`title`要素の内容はテキストのみで、子要素を持つことができません。タグを書いても意図した結果になりませんので注意してください。以下は、タイトルに`br`要素を入れようとした例です。

<!-- 単なる例示 -->
```html
<title>改行されている<br>タイトル</title>
```

このように書いた場合、`<br>`というタグは`br`要素とは解釈されず、`<br>`という文字列として解釈されます。つまり、"`改行されている<br>タイトル`"という文字列がタイトルになります。

![スクリーンショット: brを含むタイトルを表示したブラウザタブ](../img/br_in_title.png)

同様に、コメントの構文を書いてもコメントにはならず、そのままの文字列と解釈されます。

ただし、文字参照を書いた場合は展開されます。

```html
<title>タイトル &amp; タイトル</title>
```

この場合、`&amp;`は展開されて "タイトル & タイトル" というタイトルになります。<!--SGMLをご存知の方なら、RCDATAとしてパースされると言えばわかるでしょう。-->

### `title`要素の指針

WCAG 2.1の達成基準2.4.2 "Page Titled"[^2]では、ページの主題、または目的を説明するタイトルをつけることを求めています。

[^2]: https://www.w3.org/TR/WCAG21/#page-titled

利用者にとって、ページタイトルは重要です。現在どのページを見ているのかがわかるように、ウェブサイト内の個々のページにはそれぞれ異なるタイトルをつけるとよいでしょう。

慣習として、そのページ自身の名前の後に、`|`や`-`のような区切り記号を使って、サイト名やカテゴリー名を含めることが行われています。以下はその一例です。

<!-- 単なる例示 -->
```html
<title>CGWORLD vol. 248 （2019年4月号） | ボーンデジタル</title>
```

この際、サイト名を前に置くか、後ろに置くかという議論がよくあります。スマートフォンや、ブラウザーのタブに表示されること考えると、タイトルが表示されるスペースはかなり狭く、長いタイトルは後ろが切れてしまうことが多々あります。共通の名称を前に持ってくると、複数のページがすべて同じタイトルに見えてしまうことがあるため、後ろに置く方がよいでしょう。

## `base`要素
<!--※本当にいるのかどうか（HTML本という体裁では必要か）。しかしウェブでは使いどころが無いような気も。何か知見はありますか？ -->
`base`要素は、基準となるURL、およびリンク先を表示するデフォルトのウィンドウ位置を表します。この要素が存在する場合、1つしか存在してはいけません。

実際のところ、この要素を使う機会はほとんどないでしょう。ウェブ上にあるHTMLを手元にダウンロードしてテストする際、`base`要素を書き加えて元あったURLを基準URLにすることで、リソースの読み込みが簡単になる場合があります。

### 基準となるURLの指定（`href`属性）

例えば、

<!-- 単なる例示 -->
```html
<base href="https://example.com/">
...
<a href="page.html">ページ</a>
```

このように`base`要素を記述することで、ページ内の相対リンクは常に`https://example.com/`を基準に解決されます。上記の例の場合、`href`属性値で`page.html`と記載した相対リンクは、HTMLが存在している閲覧URLに関係なく、常に`https://example.com/page.html`として振る舞います。

### デフォルトのウィンドウ表示位置（`target`属性）
<!-- 単なる例示 -->
```html
<base target="_blank">
```

このように記述することで、タブブラウザーであれば常に新しいタブでリンクを開くように指定することができます。属性値の詳細については、`a`要素の`target`属性を参照してください。

ただし、利用者に事前に知らせずに新しいウィンドウを開くと、利用者を混乱させることがあります。WCAG 2.1の達成基準3.2.5 "Change on Request"[^3] では、要求なしに新しいウィンドウを開かないようにすることを求めています。

[^3]: https://www.w3.org/TR/WCAG21/#change-on-request

## link要素

<!-- リファラーポリシーとかセキュリティーポリシーとか書ける気が全くしないですが、必要であれば書きます。 -->
`link`要素は、HTML文書と、自身とは別のリソースとのつながりを表現します。

`href`属性が必須で、そのリソースのURLを指定します。

`rel`属性には、HTMLとそのリソースとの関係を表すキーワードを指定します。指定できるキーワードは仕様の"4.6.6 Link types"[^4]で規定されています。スペースで区切って複数のキーワードを同時に指定することもできます。

[^4]: https://html.spec.whatwg.org/multipage/links.html#linkTypes

ここでは、比較的よく使うものについて説明します。

### スタイルシートの設定（`rel="stylesheet"`）

`rel="stylesheet"`を指定すると、そのリソースが外部スタイルシートであることを表します。

<!-- 単なる例示 -->
```html
<link href="style.css" rel="stylesheet">
```

スタイルシートの種類は、カスケーディングスタイルシート（CSS）が想定されます。過去のHTMLでは他の種類のスタイルシートも想定されており、`type`属性を使用してスタイルシートの種類を記述していました。現在ではCSS決め打ちですので、`type=text/css`と記述する必要はありません。type属性は省略することが推奨されています (書いてもエラーにはなりませんが、冗長ですのでHTMLチェッカーに警告されます)。

なお、`link`要素は通常は`head`要素内に書きますが、`rel="stylesheet"`の`link`要素は`body`要素内に出現しても有効です。CMSの都合などで`body`に出現しても解釈されます (他にも、いくつかのパターンで`body`内でも有効になるケースがあります。詳しくは`link`要素の仕様にある"allowed in the body"の項[^4]を参照してください)。

[^4]: https://html.spec.whatwg.org/multipage/semantics.html#allowed-in-the-body

### 代替表現を提示（`rel="alternate"`）

`rel="alternate"`を指定すると、そのリソースがなんらかの代替表現であることを示します。それが具体的に何であるのかは、一緒に使われる他のキーワードや属性によって変わります。

#### 代替スタイルシート

`alternate`キーワードを`stylesheet`キーワードと一緒に指定した場合、代替スタイルシートを表します。代替スタイルシートが存在する場合、たとえばブラウザのメニューからスタイルシートの切り替えることができるようになる場合があります。たとえば、コンテンツ制作者がハイコントラスト版のスタイルも用意しておき、必要なユーザーにはそちらに切り替えてもらう、というような使い方が想定されます。

![スクリーンショット: Firefoxの代替スタイルシート選択メニュー](../img/alt-stylesheet-meun.png)

代替スタイルシートを指定する場合は、`title`属性でスタイルシートの名前を指定します。切り替え時には、ここで指定した名前が表示されることになるでしょう。

<!-- 単なる例示 -->
```html
<link href="style.css" rel="stylesheet" title="基本スタイル">
<link href="high-contrast.css" rel="stylesheet alternate" title="ハイコントラスト版">
```

残念なことに、執筆時点の最新版であるChrome80にはこのような切り替え機能がなく、代替スタイルシートを利用するには拡張機能の導入が必要です。このように、対応していないブラウザーもある上、対応しているブラウザーでも使い方がわかりにくいことが多いため、代替スタイルシートを活用してもらえる機会は少ないかもしれません。

#### 配信フィード

`rel`属性に`alternate`キーワードが単独で指定され、かつ、`type`属性に`application/rss+xml`または`application/atom+xml`が指定されている場合、サイトに対する配信フィードを表します。フィードの内容がそのHTMLの内容に必ずしも一致する必要がないことに注意してください。例えば、サイトがブログである場合、配信フィードはブログ全体のものや特定のカテゴリーのものであっても構いません。

<!-- 単なる例示 -->
```html
<link rel="alternate" type="application/rss+xml" href="posts.xml" title="ブログの新着投稿RSSフィード">
<link rel="alternate" type="application/rss+xml" href="posts.xml?category=cat" title="ブログの猫に関する新着投稿RSSフィード">
<link rel="alternate" type="application/rss+xml" href="comments.xml" title="ブログの新着コメントRSSフィード">
```

#### 代替表現
<!--優先度低めのような気もしなくもないが、 https://support.google.com/webmasters/answer/189077?hl=ja みたいな情報がGoogleのSearch Consoleにあるので、需要が無いとは言いきれないか。 -->
代替スタイルシートでも配信フィードでもない場合、`alternate`キーワードは、文書の代替表現を参照するハイパーリンクを作成します。

- `hreflang`属性と共に使用される場合、文書の翻訳であることを表します。`hreflang`属性に指定できる値は`lang`属性と同じです。指定できる値については、`lang`属性を参照してください。
- `type`属性と共に使用される場合、文書の別フォーマットであることを示します。

`hreflang`属性と`type`属性を組み合わせて使うこともできます。たとえば、`hreflang="fr"`と`type="application/pdf"`が指定されていれば、フランス語版かつPDF版ということになります。

<!-- 単なる例示 -->
```html
<html lang="ja"><!-- 日本語の文書の場合 -->
...
<link rel=alternate href="/en/html" hreflang="en" type="text/html" title="English HTML"><!-- 英語版のHTML -->
<link rel=alternate href="/ja/pdf" hreflang="ja" type="application/pdf" title="PDF版"><!-- （日本語版の）PDF -->
<link rel=alternate href="/fr/pdf" hreflang="fr" type="application/pdf" title="French PDF"><!-- フランス語版のPDF -->
```

### アイコンの設定（`rel=icon`）

`rel="icon"`を指定すると、ページまたはサイトのアイコンを表します。主にファビコン (favicon) として知られるアイコンを指定するために使用されます。

```html
<link rel="icon" href="/img/favicon.ico" type="image/vnd.microsoft.icon">
```

`icon`キーワードを`link`要素で指定しない場合、メジャーなブラウザーは`/favicon.ico`の読み込みを試みます。ですから、`/favicon.ico`の設置のみをして、`icon`キーワードをあえてHTMLで記述しないという方法もあります。

また、主にiOSやAndroidといったモバイル端末向けに、非標準の`apple-touch-icon-precomposed`キーワードと共にアイコンを指定するという方法があります。詳しくは、やや古いですがファビコン・カンニング・ペーパー[^5]が参考になります。

[^5]: https://hail2u.net/documents/favicon-cheat-sheet-ja.html

なお、歴史的理由から`rel="shortcut icon"`と記述することも許されていますが、`icon`と同じ意味になります。

<!-- 
Resource Hints、Preload仕様等のリンクタイプが必要あれば解説する（？）

（Qiitaのそれっぽいの）
http://qiita.com/ryo_hisano/items/e525616e5026b015aafe
-->

### 正規URLの設定（`rel="canonical"`）

`rel="canonical"`は、正規のURLを表します。

なんらかの事情で、同一内容のページに複数のURLが与えられる場合があります。たとえば、効果測定のためにURLの末尾にクエリ文字列をつけると、それだけで別のURLとみなされることになります。また、サーバー設定の都合で、"www"サブドメインの有無によらずで同一のコンテンツが配信される場合なども、異なるURLで同一内容が表示されることになります。

このような場合に、`rel="canonical"`を使用すると、どれが正規のURLなのか示すことができます。これにより、検索エンジンが検索結果に出すURLが片方に絞られる、といった効果が期待できます。

たとえば、`https://www.example.com/red-garden`と`https://example.com/red-garden`というURLが同一コンテンツである場合、前者のURLを正であるとすると、以下のように記述します。

<!-- 単なる例示 -->
```html
<link rel="canonical" href="https://www.example.com/red-garden">
```

自身を参照する記述も可能ですので、両方のコンテンツに上記を書いておくとよいでしょう。`href`属性値は相対URLで指定することも可能ですが、性質上、ほとんどのケースで絶対URLが使われます。

### その他のキーワード

HTML仕様に示されたキーワード以外にも、microformats wikiのexisting-rel-valuesページ[^6]に登録されたものを使用することができます。このページは誰でも登録することができるので、事実上、自由に拡張することができます。

[^6]: http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions

## meta要素

`meta`要素は、他の要素では表現できないさまざまな種類のメタデータを表します。次の4つの属性の内、少なくとも1つを指定する必要があります。

- `charset`: HTMLの文字エンコーディングを表します。
- `http-equiv`: HTTPでウェブサーバーから与えられる情報と等価の情報を表します。
- `name`: 文書レベルのメタデータを表します。
- `itemprop`: microdataによるメタデータを表します。

`charset`属性を指定した場合を除き、`content`属性も同時に指定しなければなりません。

### charset属性による文字エンコーディング宣言（`charset`、`http-equiv="content-type"`）

`meta`要素で最もよく使用されるのが「文字エンコーディング宣言」(character encoding declaration)です。`charset`属性を用いて次のように指定します。

<!-- 良い例 -->
```html
<meta charset="utf-8">
```

`charset`属性の値は、`utf-8`でなければなりません (大文字小文字は区別しません。"UTF-8"と書いても問題ありません)。また、`charset`属性の代わりに、`http-equiv="content-type"`とともに次のように宣言することもできます。

<!-- 冗長な例 -->
```html
<meta http-equiv="content-type" content="text/html; charset=utf-8">
```

この場合、`content`属性の値は、`text/html; charset=`で始まらなければなければなりません (大文字小文字は区別しません)。`charset`属性と同様、`charset=`の直後に、文字符号化方式のラベルを記述します。文字符号化方式のラベルは、"UTF-8"でなければなりません。

なお、過去との互換性から、ユーザーエージェントはUTF-8以外の文字符号化方式を解釈することがあります。UTF-8以外の文字符号化方式は、Encoding標準で「レガシーエンコーディング」(legacy encoding)と呼ばれます。日本語を扱えるものとしては、Shift_JIS、EUC-JP、ISO-2022-JPが存在します。これはあくまで互換性のためのものであり、現在のコンテンツ制作者はUTF-8を指定する必要があります。

文字エンコーディング宣言を使用する場合、複数回宣言してはなりません。つまり、`charset`属性と`http-equiv="content-type"`属性の両方を同時に使用してはいけません。`charset`属性を選択するのがモダンな書き方です。

また、文字エンコーディング宣言が存在する場合、先頭から1024バイト以内に出現なければなりません。言い換えると、HTML文書のなるべく先頭に書く必要があるわけです。典型的なHTML文書において、`head`要素の最初の子要素として文字エンコーディング宣言が書かれるのは、このような背景によるものです。

### `http-equiv`属性を指定する場合

`http-equiv`属性を指定すると、これはプラグマ(Pragme, 司令)と解釈されます。"http-equiv"という属性名は、HTTPと等価という意味です。つまり、通常はHTTP応答ヘッダで与えられる情報の代わりに指定しているもの、ということを意味します。

逆にいうと、`http-equiv`属性で示される情報は、HTTP応答ヘッダでも示すことができます。ウェブ上でHTMLコンテンツを提供できる場合は、HTMLの`meta`要素で指定するよりも、HTTP応答ヘッダで指定するほうが望ましいでしょう。前述のエンコーディング宣言も、HTTP応答ヘッダで文字符号化方式を示すことができていれば、省略可能です。ただし、省略すると、ローカルにダウンロードして閲覧した場合などに文字化けすることがあるため、保険として指定しておくとよいでしょう。

`http-equiv`属性は列挙型で、いくつかの決められた値しか指定できません。詳細は仕様の"4.2.5.3 Pragma directives"[^7]を参照してください。

[^7]: https://html.spec.whatwg.org/multipage/semantics.html#pragma-directives

ここでは、注意が必要なものだけ説明します。

#### ページのリフレッシュ（`http-equiv="refresh"`）

`http-equiv="refresh"`を指定し、`content`属性に負でない整数を指定すると、ページはその秒数で自動的に再読み込みされます。以下は、300秒後にページを再読み込みする例です。

<!-- 推奨しない例 -->
```html
<meta http-equiv="Refresh" content="300">
```

また、`content`属性に負でない整数と、セミコロン、スペース、`URL=`という文字列 (大文字小文字は区別しません)、最後にURLを順番通りに書くことで、指定秒数後にそのURLへリダイレクトする動作を指定することができます。以下は30秒後にに移動する例です。

<!-- 推奨しない例 -->
```html
<meta http-equiv="Refresh" content="30; https://www.example.net/">
```

しかし、いずれも利用者の意図しないタイミングでページが再読み込みされ、行動の妨げとなることがあるため、勧められません。WCAG 2.1の達成基準3.2.5 "Change on Request"[^3] では、利用者の要求なしに再読み込みすることを避けるように求めています。また、ブラウザの設定でこの再読み込みの動作を無効にできる場合もあります。

リダイレクト指定の際、秒数として0を指定することもできます。0を設定した場合、ページを表示せずに即座にリダイレクトします。

<!-- 推奨しない例 -->
```html
<meta http-equiv="Refresh" content="0; https://www.example.net/">
```

この場合、利用者が読んでいる途中でリダイレクトが発生することはないため、WCAG の達成基準の観点からは問題ありません。ただし、ウェブサーバーの設定を行える環境であれば、サーバー側の設定でリダイレクトを行うほうが望ましいでしょう。

#### CSP（`http-equiv="content-security-policy"`）

`http-equiv="content-security-policy"`を指定すると、「CSP」(Content Security Policy)の指定ができます。CSPの指定をすると、このページ上でのJavaScriptの動作を制限することができます。これにより、クロスサイトスクリプティングの攻撃を受けにくくなります。

CSPも他の`http-equiv`属性でしていするものと同様、基本的にはHTTP応答ヘッダで指定することができます。HTTP応答ヘッダで指定すると、広範なページに一気に適用できる反面、ここのページごとの細かい調整がやりにくい面があるため、利用開始時にいくつかのページで試してみる場合には`meta`要素を使ってもよいでしょう。

CSPの内容の詳細は本書では触れません。CSP2の仕様[^8]がW3C勧告となっており、CSP3[^9]が策定中となっていますので参照してみてください。
[^8]: https://www.w3.org/TR/CSP2/
[^9]: https://www.w3.org/TR/CSP3/

### `name`属性を指定する場合

`name`属性を指定した場合、そこで指定した名前と、`content`属性で指定した値をもつメタデータを表現します。別の言い方をすると、メタデータとなるテキストを`content`属性で指定し、`name`属性で任意の名前をつけて表現することができます。

`name`属性には任意の値を指定できますが、よく使われるものは仕様の"4.2.5.1 Standard metadata names"[^10]で説明されています。

[^10]: https://html.spec.whatwg.org/multipage/semantics.html#standard-metadata-names

ここでは、そこからさらに絞っていくつかをご紹介します。

#### ページコンテンツの説明（`name="description"`）

`name="description"`を指定すると、`content`属性の値はページコンテンツの説明となります。検索エンジンはこの値を読み、検索結果ページに表示することがあります。

<!-- 単なる例示 -->
```html
<meta name="description" content="ボーンデジタルはデジタルクリエイターを支援するサービスカンパニーです。ソフトウェア・ハードウェア・書籍・雑誌・セミナー・トレーニングなど様々なサービスで学びを提供しています。">
```

一般に、サイトのページごとに、そのページの内容を適切に説明する文があるとよいでしょう。なお、この値がなくとも、検索エンジンはコンテンツの内容から説明文を生成して問題なく検索結果を表示できることがほとんどです。無理に不適切な値を指定するくらいなら、指定しないという判断をするのもありでしょう。

#### ページのキーワード（`name="keywords"`）

`name="keywords"`は、ページに関連するキーワードをカンマ区切りで記述するものでした。しかし、検索エンジンスパムに濫用された経緯があり、現在ではほとんどの検索エンジンがこれを無視します。現在でも惰性で (おそらくは古いガイドラインに従って) 指定されることがありますが、指定しなくて良いでしょう。

なお、この"keywords"は複数形で、"keyword"とスペルミスしないようにという注意点も昔はありましたが、現在ではどちらにせよ等しく無視されます。

#### ビューポート(`name="viewport"`)

`name="viewport"は、主に画面の小さなモバイルブラウザーに対して、ウェブページの表示方法を制御します。

<!-- 良い例 -->
```html
<meta name="viewport" content="width=device-width, initial-scale=1">
```

とりうる値については、CSS Device Adaptation仕様[^11]の中で定められています。`maximum-scale=1.0`、`user-scalable=no`といった、ズームする機能を禁止するような設定は、ウェブアクセシビリティに悪影響を与えるため、避けるべきです。WCAG 2.1の達成基準"1.4.4 Resize text"[^12]では、文字の拡大縮小ができることを求めています。

[^11]: https://drafts.csswg.org/css-device-adapt/#viewport-meta
[^12]: https://www.w3.org/TR/WCAG21/#resize-text

### `itemprop`属性を指定する場合

`itemprop`属性はグローバル属性で、さまざまな要素に指定でき、その要素の値が何であるのか表現することができます。多くの要素では、要素の内容に対して`itemprop`属性で名前をつけることになります。しかし時には、コンテンツとして表示したくないデータに名前をつけてメタデータとして提示したい場合があり、そのような場合に`meta`要素が利用できます。
`meta`要素に`itemprop`属性を指定した場合は、内容ではなく`content`属性の値に名前をつけることになります。

<!--良い例-->
```html
<span itemscope><meta
  itemprop="name"
  content="The Castle"></span>
<figure>
 <img src="castle.jpeg">
 <figcaption>The Castle
  (1986)</figcaption>
</figure>
```
<!-- ひとまずMDNから拝借 https://developer.mozilla.org/ja/docs/Web/HTML/Global_attributes/itemprop -->
<!-- あまり良くない例のような気もするのであとで検討したい -->

上の例でわかるように、`itemprop`属性を持つ場合、`meta`要素のカテゴリはflowもしくはphrasingとなり、一般の要素の中に書くことができます。逆に、`itemprop`属性を持たない`meta`要素は`head`要素の中にしか出現することができません。

<!--
- WHATWG Wiki MetaExtensions pageの説明？（https://wiki.whatwg.org/wiki/MetaExtensions）（事実上の自由な拡張）
### `itemprop`？
-->

## `style`要素

`style`要素は、スタイル情報を埋め込む要素です。`<link rel="stylesheet">`の場合と同様に、スタイルシート言語はCSSが想定されます。現在では`type`属性が不要であり、省略が推奨されることも同様です。`link`要素と異なるのは、要素の内容に直接CSSの記述が入るということです。

一般に、`link`要素で指定されたスタイルシートを「外部スタイルシート」、`style`要素に記述されたスタイルシートを「埋め込みスタイルシート」と呼ぶことがあります。複数ページで同じスタイルシートを使い回すことが多く、HTMLとCSS別々に編集したいことが多いため、メンテナンス性の観点から、外部スタイルシートを用いることが一般的です。`style`要素は、一時的に特定ページだけにスタイルを適用するような場合に使われることがあります。

かつては、`style`要素の中でHTMLコメントを書いてコメントアウトする手法が使われたこともありました。

```html
<!-- 時代遅れな悪い例 -->
<style type="text/css">
<!--
...
-->
</style>
```

この場合、`<!--`はHTMLのコメントとしては解釈されず、そのままの形でCSSを解析するエンジンに渡されます。そして、CSSの側の処理としてコメント扱いされます (`<!--`という文字列はCSSの文法でもコメント扱いになります)。

この書き方は、`style`要素を解釈しないブラウザーへの対策です。極めて古い話であり、現在ではこのように書く必要はありません。