<!-- ch3-9.txt (4ページ、3000～4600字想定) -->
# フォーム
この節では、ウェブサーバーに情報を送信できるファーム関連要素について概説します。

## `form`要素
`form`要素は、サーバーに情報を送信する値を表すための、フォーム関連要素のコレクションを表します。典型的なHTMLフォームは、`action`属性によってフォームを送信するURLを、`method`属性でデータの送信方法を指定します。
```
<form method=get action=/search.cgi>
  <!-- 具体的なフォームの中身 -->
</form>
```
`method`属性は列挙属性です。上記の例で指定されるキーワード`get`は、HTTP GETメソッドを示します[RFC 7231§4.3.1]。これにより、指定したURLのリソースをサーバーから要求します。
キーワード`post`は、HTTP POSTメソッドを示します[RFC 7231§4.3.3]。これにより、URLへフォームを送信します。
キーワード`dialog`は、`dialog`要素と組み合わせて使用します。

## `label`要素
`label`要素は、ユーザーインターフェイスのキャプションを表します。この要素はラベル付け可能要素と呼ばれるフォーム関連要素に対して、ラベルのテキストを単に視覚的に関連付けるだけでなく、プログラム的にも関連付けるところがポイントです。
```
<label>Query: <input name="q" type="text"></label>
```
このようにすれば、ラベル「Query:」をクリックすると、ほとんどのブラウザーは`input`要素にフォーカスを当てます。また、フォーカスが当たったときにスクリーンリーダーは明示的にラベルを読み上げ、どのようなデータを入力するのが適当か理解しやすくなるでしょう。
また、`for`と`id`属性を用いて、ラベル付けすることもできます。ただし、ページ内で一意でなければならない`id`属性が増えることになりますから、特段の事情がなければ次のようにマークアップしない方がシンプルでしょう。
```
<label for=”id”>Query: </label><input name="q" id=”q” type="text">
```

## `input`要素
`input`要素は、ユーザーがデータを編集できるようにするためのフォームコントロールを表します。`input`要素の動作は、`type`属性の値に応じて大きく異なります。以下で個別の値について見ていきます。この属性を指定しない、または解釈されない場合は`text`になります。
<!--`input`要素などの外観を制御するappearance プロパティは、2000年代から標準化が試みていますが、CSS UI 4での現在の規定は依然として混乱しています。-->

### `type=text`と`type=search`
どちらも、1行のプレーンテキスト編集コントロールを表します。

```
<label>検索キーワード: <input name="q" type="search"></label>
```
`type=text`と`type=search`の大きな違いは、検索に適したインターフェイスを提供するかどうかです。`type=search`を解釈するブラウザーでは、入力ボックスの端に✕のアイコンを表示し、キーワードをクリアする機能を提供します。これにより、入力済みの場合に、より簡単に検索キーワードを入力できることがあります。

### `type=tel`
`type=tel`をもつ`input`要素は、ユーザーに電話番号の入力や編集をさせるコントロールを表します。
`type=tel`の入力欄は機能的に標準の`type=text`の入力欄と一見同じですが、便利な用途を提供します。とくにスマートフォンに搭載されるモバイルブラウザーでは、電話番号の入力に最適化された専用のキーパッドを表示することがあります。
電話番号には様々なパターンがあります。日本に限ったとしても、国番号（日本の場合+81）から始まることがありますし、固定電話の市外局番は2桁から5桁までの桁数があり得ます。警察への緊急電話は110ですし、 道路緊急ダイヤルは＃9910です。この2つをフォームに入力させることはまずないと思いますが、入力されうる値を確認した上で、値の検証を行う必要があります。

## `type=url`
`type=url`をもつ`input`要素は、ユーザーに絶対URLの入力や編集をさせるコントロールを表します。
後述の`pattern`属性を使って、入力値の検証を行うこともできます。例えば、`https://`で始まるURLのみをフォームで受け付けたい場合は、次のように書くことができるでしょう。
```
<input type=”url” pattern="^https://.+" title="httpsで始まるURLを入力してください。">
```

`pattern`属性をもつ`input`要素で`title`属性も持たせることで、`pattern`にマッチしない値が入力されたときに、どのようなパターンを入力する必要があるのかのヒントを与えることができます。

### `type=email`
`type=email`をもつ`input`要素は、ユーザーにメールアドレスの入力や編集をさせるコントロールを表します。

### `type=password`
`type=password`をもつ`input`要素は、パスワードのようなセンシティブな値をユーザーに入力させるためのコントロールを表します。入力した値は通常、直接見えないようになります。

### 日付および時刻のコントロール
さまざまな日付と時刻を入力するためのコントロールがあります。
`type=month` 年と月
`type=week` 年と週番号
`type=date` 年月日
`type=time` 時刻
`type=datetime-local` 日付と時刻
フォームの送信時には、HTML5の日付および時刻形式に従った値を返します。すなわち、日付を持つコントロールの場合、値はハイフン（`-`）で区切られます。時と分はコロン（`:`）で区切られます。日付と時間は`T`で区切られます。ただし、タイムゾーン情報は持ちません。
値の入力インターフェースは、ブラウザーによってさまざまです。多くのブラウザーでは、日付を入力するコントロールではカレンダーに似たインターフェイスで入力することができ、`type=text`よりも直感的に日付を選択することができます。

`min`属性と`max`属性で日付や時刻の範囲を指定することができます。また、`step`属性で値の間隔を指定することができます。たとえば、10時から20時までで、15分刻みのフォームにするには、次のようにまります。
```
<input type=time min=10:00 max=20:00 step=900>
```
`min`は範囲の最小値、`max`は範囲の最大値を指定します。言い換えると、`max`値は`min`よりも常に大きいです。
時刻の場合デフォルトのステップは60秒（1分）です。秒単位で15分を指定するため、値は900となります。

### `type=number`
`type=number`をもつ`input`要素は、ユーザーに数値を入力させるために使用します。

ここで言う数値は、HTML仕様で定義される妥当な浮動小数点数（valid floating-point number）です。つまり、小数を受け付けることに注意してください。
フィールドを初期値を10にした、1以上100以下の整数の範囲にしたい場合は、次のようになります
```
<input type=number min=1 max=100 step=1 value=10>
```
このように`type=number`を用いても、ブラウザーによっては浮動小数点数で許容される以外の文字が入力できます。値は送信時に検証されますが、フォームで確実に数値を選択させたい場合は、`select`要素を使用することを検討したほうがよいでしょう。

### `type=range`
`type=range`をもつ`input`要素は、ユーザーに範囲内の数値を指定せるために使用します。多くの場合、スライダーコントロールでレンダリングされます。
スライダーでつまみを動かすというインターフェイスであるため、大まかな値を直感的に指定できる反面、正確な値を指定するにはあまり向いていないことに注意が必要です。
```
<p>
<label>範囲が0～100、ステップが0.2なスライダーに50ごとに目盛りをつける
<input id="range01" type="range" min="0" max="100" step="0.2" value="0" list="scale" />
</label>
<datalist id="scale">
<option>0</option>
<option>50</option>
<option>100</option>
</datalist>
```
`datalist`要素を使って、目盛りを与えることができます。

### `type=color`
値は6桁のRGB 16進記法で返されます（sRGB）。
これは、アルファチャンネルは指定できないことを意味します。また、たとえHSLのようなRGBとは異なる色指定方法で指定できるインターフェイスが備わっていたとしても、値はRGBで返されます。

### `type=checkbox`
`type=checkbox`をもつ`input`要素は、選択肢の中から複数選択が可能なチェックボックスを表します。

```
所有している機器：
<label><input type=checkbox name=gadget value=desktop>デスクトップパソコン</label>
<label><input type=checkbox name=gadget value=laptop>ラップトップパソコン</label>
<label><input type=checkbox name=gadget value=smartphone>スマートフォン</label>
<label><input type=checkbox name=gadget value=tablet>タブレット</label>
```
チェックボックスはチェックされている状態と、チェックされていない状態を持ちます。これとは別に、チェックがされているともされていないとも言えない、未確定（indeterminate）状態があります。これは`HTMLInputElement`インターフェイスの`indeterminate`プロパティにより設定可能です。
この未確定状態でフォーム送信された場合、チェックされていない場合と同じ結果になります。

### `type=radio`
`type=checkbox`をもつ`input`要素は、選択肢の中から1つのみが選択可能なラジオボタンを表します。

```
性別：
<label><input type=checkbox name=sex value=1>男性</label>
<label><input type=checkbox name=sex value=2>女性</label>
<label><input type=checkbox name=sex value=9>その他</label>
<label><input type=checkbox name=sex value=0 checked>回答しない</label>
```
`checked`属性を与えることで、規定のボタンを選択させることができます。

### `type=file`
`type=file`をもつ`input`要素は、選択された1つ以上のファイルのリストを表します。選択されると、ファイルはフォーム送信を利用してサーバーにアップロードしたり、File APIを使用して操作したりできます。
最低限の複数ファイルの送信フォームは次のようになります。
```
<form enctype=”multipart/form-data” method=”post” action=”hoge.cgi”>
<label>アップロードするファイルを選択してください：
<input type=”file” name=”file” multiple>
</label>
<button>送信</button>
</form>　
```
`type=file`を持つフォームを設置する場合は、`form`要素の`enctype`を`multipart/form-data`とします。こうすることで、複数の種類のデータを一度に送信させることができます。
`multiple`属性を設置することで、複数のファイルを選択できるようになります。

### `type=submit`、`type=reset`、`type=button`
`type=submit`、`type=reset`、`type=button`をもつ`input`要素は、`button`要素でもマークアップすることができます。レガシーな環境のために、これらの`type`属性値をもつ`input`要素を使用しなければならない場合を除いて、`button`要素を選択した方がよいでしょう。機能については、`button`要素を参照してください。

### `type=image`
`type=image`をもつ`input`要素は、画像による送信ボタンを表します。この目的では、代わりに`button`要素を使用できます。
また、クリックした画像の座標を送信できます。サーバーサイドイメージマップと似た動作を実現することができますが、アクセシビリティ上の問題があります。この目的では、代わりにクライアントサイドイメージマップ（`area`要素）を使うのが望ましいです。

## `button`要素
`button`要素は、ボタンを表します。
`type`属性は、アクティブ時のボタンの振る舞いを制御します。この属性は列挙属性であり、次の表の値を取ります。

|`type`属性値  |機能の概要 |
|---|---|
|`submit`  |フォームを送信します。  |
|`reset` |フォームをリセットします。  |
|`button`| 何もしません。 |

`type`属性を省略した場合、`submit`が指定されたのと同じになります。

`input`要素でも`button`要素の機能を実現できますが、`input`要素は`value`属性に文字列しか設定できないのに対し、`button`要素はコンテンツとして表すことができます。言い換えると、`button`要素の内側で要素（フレージングコンテンツ）を置くこともできることになります。
```
<!-- inputとbutton要素の比較 -->
<input type=”submit” value=”送信”>
<button type=”submit”>送信</button>
```


<!--
元ネタをどうするか

LS
https://momdo.github.io/html/forms.html

MDN
https://developer.mozilla.org/ja/docs/Learn/HTML/Forms

HTML5 Rocks
https://www.html5rocks.com/ja/tutorials/forms/html5forms/
-->

<!-- HTML LSからのコピー-->
```
4.10.5.1 type属性の状態
<!-- 21全部載せるわけにも行かないので -->
4.10.5.3 共通input要素属性

    4.10.5.3.1 maxlengthおよびminlength属性
    4.10.5.3.2 size属性
    4.10.5.3.3 readonly属性
    4.10.5.3.4 required属性
    4.10.5.3.5 multiple属性
    4.10.5.3.6 pattern属性
    4.10.5.3.7 minおよびmax属性
    4.10.5.3.8 step属性
    4.10.5.3.9 list属性
    4.10.5.3.10 placeholder属性

           4.10.6 button要素
            4.10.7 select要素
            4.10.8 datalist要素
            4.10.9 optgroup要素
            4.10.10 option要素
            4.10.11 textarea要素
            4.10.12 output要素
            4.10.13 progress要素
            4.10.14 meter要素
            4.10.15 fieldset要素
            4.10.16 legend要素

4.10.18.1 名前フォームコントロール：name属性
4.10.18.2 要素の方向を送信する：dirname属性
4.10.18.3 ユーザー入力長さの制限：maxlength属性
4.10.18.4 最小入力長の要件を設定する：minlength属性
4.10.18.5 フォームコントロールの有効化および無効化：disabled属性
4.10.18.6 フォームの送信

    4.10.18.6.1 フォームコントロールを自動フォーカスする：autofocus属性

4.10.18.7 オートフィル

    4.10.18.7.1 オートフィルフォームコントロール：autocomplete属性
```
<!-- 繰り返しになるけれども、全部載せられないので！ -->
