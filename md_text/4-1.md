# グローバル属性
HTMLのすべての要素で使用可能なグローバル属性について説明します。

<!-- LSからのコピー -->
<!-- 
** 属性の評価とか **
`accesskey`
有名ではあるが、使いどころに難あり（？）

autocapitalize
かなりマニアックそう

contenteditable

draggable
hidden
inputmode
is
itemid
itemprop
itemref
itemscope
itemtype

nonce
spellcheck

## `translate`属性?

## `dir`属性
-->

## グローバル属性とは

グローバル属性とは、すべてのHTML要素で共通の属性です。

仕様では多数のグローバル属性が定義されていますが、本書では代表的なグローバル属性について紹介します。

## `title`属性

`title`グローバル属性は、要素に対する助言情報を表します。`link`や`abbr`などの一部の要素では、追加の意味を表すことがあります。

`title`属性の値は典型的に、ブラウザーでツールチップとしてレンダリングされます。ツールチップを表示させるには通常、マウスでマウスポインターを使用することが考えられます。これは言い換えると、タッチスクリーンやキーボードの操作では、ツールチップを表示させることができないことを意味します。ウェブアクセシビリティの観点から、`title`属性が追加の意味を持たない要素上で、この属性に依存することを推奨しません。

## `lang`属性

`lang`属性は、指定された要素とその子孫要素の言語が何であるかを指定します。ユーザーエージェントが適切なフォントや発音のための参考にするため、特に`html`要素でこの属性を設定することを推奨します。

属性値は、言語タグとも呼ばれる、IETF BCP47仕様に基づいて記述します。言語タグはサブタグから構成されます。詳しい説明については、W3C文書[^1]を参照してください。ここではよく用いられる次のサブタグを取り上げます。

[^1]: HTMLとXMLにおける言語タグ https://www.w3.org/International/articles/language-tags/

- 言語（language）サブタグ
- 用字（script）サブタグ
- 地域（region）サブタグ

サブタグの順序は、この箇条書きの順序で記述します。例えば、言語サブタグの前に、用字サブタグが来ることはありません。また、以降では慣習に従って大文字・小文字を区別して言語タグを説明しますが、`lang`属性の値は大文字・小文字を区別しません。2つ以上のサブタグを使う場合、ハイフン`-`でつなぎます。

言語タグの最も重要なルールは、できるだけタグを短く保つことです。言語を区別する必要がなければ、用字サブタグや地域サブタグを使う必要はありません。例えば、日本語を表す言語サブタグ`ja`と、日本を表す地域サブタグ`JP`がありますが、「日本で話される日本語」という冗長な説明は、通常は必要はないはずです。ですから、日本語に対しては`ja-JP`ではなく、`ja`を使用します。


### 言語サブタグ

全ての言語タグは、この言語サブタグから開始しなければなりません。言語のみの言語タグの例としては、次のようなものがあります。

- `en` （英語）
- `zh` （中国語）
- `ja` （日本語）
- `ryu` （沖縄方言）

この言語サブタグは、ISO 639[^2]で定められた言語コードに由来するもので、2文字（または3文字）の長さのものです。

[^2]: ISO 639は複数のパートから構成されますが、そのうちいくつかはJIS X 0412に対応する規格があります。

### 用字サブタグ

用字サブタグをもつ言語タグの例は、次のようになります。

- `zh-Hans` （簡体字）
- `zh-Hant` (繁体字)
- `ja-Hira` （ひらがな）

用字サブタグは、ISO 15924で定められた用字コードに由来する、常に4文字の長さです。中国語で繁体字なのか、簡体字なのかを明示するのに、特に有用です。

### 地域サブタグ

地域サブタグを持つ、言語タグの例は次のようになります。

- `en-GB` （イギリス英語）
- `en-US` （アメリカ英語）
- `zh-Hant-HK` （香港で使われる、繁体字中国語）

地域サブタグは、ISO 3166[^3]で定められた国コードを通常使用します。国コードは、2文字の英字です。英語のような広い地域で話される言語では、どの地域なのかを絞り込むことは有用です。

[^3]: ISO 3166は複数のパートから構成され、そのうちISO 3166-1についてはJIS X 0304と一致規格になります。

### XML文書の場合

XML文書の場合、`xml:lang`属性を使用することができます。属性値の規則は`lang`属性と同じです。古いHTMLの慣習として、`xml:lang`と`lang`の両方を記述することもありますが、もし両方を記述する場合、大文字・小文字を区別しないで同じ値を記述しなければなりません。

## `style`属性

CSSスタイルを設定する属性です。その場ですぐにスタイルを適用するのに便利な反面、スタイルの継承が難しくなります。１つのHTML内でメンテナンス性を考慮してスタイルを記述する場合、`style`要素で記述する方が好ましいと言えます。

## `data-*`属性
カスタムデータ属性と呼ばれるこの属性は、ウェブ制作者が自由に属性の名前を設定できるものです。`*`は、命名規則に従った自由な文字列を意味します。命名規則に沿ったものであれば、どのような名前であっても構いませんが、概ね次の規則になっています（正確な規則は仕様を参照ください）。

- 文字は、記号類でない文字のほぼすべてです。数字、アルファベット、ひらがなや漢字を含むマルチバイト文字を含めることができます。ただし、アルファベットの大文字`A`から`Z`を使用することはできません。使いやすさのため、アルファベットの小文字のみを使うことがほとんどです。
- 記号類は、ハイフン`-`、アンダースコア`_`を使うことができます。
- 開始してよい文字に制約があります。文字列`xml-`で始めてなりません。また、数字やハイフンで始めてもいけません。

たとえば、次のようなコードでカスタムデータ属性の属性値を取得することができます。JavaScriptのプロパティで属性値を取得するとき、先頭の`data-`を除去したプロパティ名となります。`*`にハイフンを含む場合、名前はキャメルケースで取得します（つまり、ハイフンの次の文字を大文字にしてハイフンを除去します）。

```
<span id="cdtest" 
data-htmlbook-test="これはテストコードです。" 
data-htmkbook_test="もしもし">深い意味はありません</a>
<script>
var e = document.getElementById('cdtest');
window.alert(e.dataset.htmlbookTest);
</script>
```

## `class`属性

`class`属性は、要素が所属するクラスを表します。値はスペース区切りのトークンです。

CSSのクラスセレクターとのマッチングに用いるシーンが最も多いと思いますが、DOMの`getElementsByClassName()`メソッドと連携することもあります。

値自体に命名の制約はありませんが、コンテンツの見た目を記述する値よりも、コンテンツの性質を記述する値を使用することが、HTML仕様の注で推奨されています。

クラス名の命名規則としていくつかの提案がなされていますが、SMACSS[^4]やFLOCSS[^5]などといったものが知られています。

[^4]: スマックスと発音。Scalable and Modular Architecture for CSSの略称。http://smacss.com/ja

[^5]: フロックスと発音。 https://github.com/hiloki/flocss


## `id`属性

文書内において唯一な識別子（ID）を設定します。1つの文書内でIDの値が存在してはなりません。

古いHTMLではIDの値に使用できる文字列に制限がありました。具体的には、ASCII英字、数字、`-`、`_`、`.`というものでした。現在のHTML仕様にそのような制限はありませんが、慣習として古いHTMLの文字列制限に従うことが多いです。

IDは次の方法で参照できます。

- URLのフラグメント
- CSSのIDセレクター
- DOMの`document.getElementById()`メソッド


## `tabindex` 属性

この属性は、要素が入力フォーカスを持つ場合に、キーボードの逐次ナビゲーション（通常は<kbd>Tab</kbd>キー）に加わるかどうか、加わるとすればどの順番かを指定します。

値として整数を受け付けます。負の数、`0`、正の数によって、挙動は変化します。

- 負の数（通常は`-1`）の場合、要素はフォーカス可能ですが、キーボードの順次ナビゲーションでは到達しないことを示します。
- `0`の場合、要素をクリックでもキーボードでもフォーカス可能にしたいことを示します。
- 正の数の場合、`0`と同じでかつ、数字が相対的な順序を示します。ウェブアクセシビリティの観点から、正の数を指定することは勧められません。DOMの順序とフォーカス順序が一致するようにHTMLを記述することが望まれます。


## イベントハンドラーコンテンツ属性

イベントハンドラーコンテンツ属性、または単にイベントハンドラー属性は、例えば`onclick`のような、`on`で始まり、その直後にイベントの名前が続く属性です。仕様ではとして60以上の属性がグローバル属性のセクションに列挙されています。グローバル属性としてどのようなイベントハンドラー属性が存在するのかは仕様を参照ください。

イベントは、キーボードやマウス、フォーカスやページの読み込みなど多岐にわたります。どのような種類にどのような具体的なイベントが存在するのかについては、MDNのイベントリファレンスが参考になります[^6]。

イベントハンドラーとよく似た概念に、イベントリスナーがあります。通常同じ処理結果が得られますが、JavaScriptを記述するにあたっては、イベントリスナーを使用するのが一般的です。イベントハンドラーとイベントリスナーの例をそれぞれ示します。例示コードで得られる結果は同一です。

```
<p><button onclick="return myFunc()">押します</button></p>

<script>
function myFunc() {
    window.alert("Hello World!");
}
</script>
```

```
<p><button id="sample1">押します</button></p>

<script>
function myFunc() {
    window.alert("Hello World!");
}
let e = document.getElementById('sample1');
e.addEventListener('click', myFunc, false);
</script>
```

[^6]: イベントリファレンス | MDN https://developer.mozilla.org/ja/docs/Web/Events

## その他のグローバル属性

詳細な説明はしないものの、HTMLコードを見ていると出くわす可能性があるものの一部を簡単に紹介します。

- `accesskey`属性。要素のショートカットキーのヒントを示します。OSやブラウザーが持つショートカットキーと衝突することがあるなどの理由から、使用は推奨されません。
- `hidden`属性。要素が現在のページの状態に直接関係がないことを示します。この属性が指定されると、ブラウザーは要素をレンダリングしません。
- `itemid` / `itemprop` / `itemref` / `itemscope` / `itemtype` 属性。HTMLコンテンツにメタデータを記述できるmicrodata（マイクロデータ）のための属性です。
- `translate`属性。翻訳対象とするかどうかを示します。機械翻訳サービスがこの属性を尊重することがあります。
- ARIA `role`および`aria-*`属性。WAI-ARIA仕様に基づいて、追加のセマンティックスを指定するために使用します。WAI-ARIAについては4-2説を参照ください。
- `xmlns`属性。XML名前空間を記述するための属性です。古いHTMLの仕様の中には、記述を求められることがありました。`text/html`では何の効力もありません。
